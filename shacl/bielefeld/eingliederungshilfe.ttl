@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix ff: <https://foerderfunke.org/default#> .
@prefix shn: <https://schemas.link/shacl-next#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

ff:egh a ff:RequirementProfile ;
    ff:title "Eingliederungshilfe"@de ,
                "Integration Assistance"@en ;
    ff:category ff:gesundheit-pflege-bc-kategorie ;
    ff:validationStage ff:preliminary-validation ;
    ff:legalBasis ff:sgb-ix ;
    ff:administrativeLevel ff:bund ;
    ff:providingAgency ff:sozialamt ;
    ff:tag ff:bielefunke ;
    ff:benefitInfo "Menschen mit einer wesentlichen Behinderung oder von einer solchen bedrohte Personen haben Anspruch auf Eingliederungshilfe. Sie unterstützt dabei, Einschränkungen auszugleichen und die gleichberechtigte Teilhabe am Leben in der Gesellschaft – etwa in Schule, Ausbildung, Arbeit, Wohnen und Freizeit – zu ermöglichen."@de ,
               "People with a substantial disability, or at risk of such, are entitled to integration assistance. It helps to compensate for limitations and enables equal participation in society – for example in education, training, work, housing, and leisure."@en ;
    ff:moreInfoAt <https://raw.githubusercontent.com/Citizen-Knowledge-Graph/foerderfunke-react-app/refs/heads/main/public/assets/data/requirement-profiles/requirement-profiles-hydration.json> ;
    ff:hasMainShape ff:eghMainShape ;
    ff:hasFlowShape ff:eghFlowShape .

# ----- EVALUATION LOGIC -----

ff:eghMainShape a sh:NodeShape ;
    sh:targetClass ff:Citizen ;
    sh:property [ sh:path ff:disability ; sh:in (true) ] ;
    sh:property [ sh:path ff:significantDailyLifeLimitation; sh:in (true) ] .

# ----- DECISION TREE LOGIC -----

ff:eghFlowShape a sh:NodeShape ;
    sh:targetClass ff:Citizen ;
    sh:property ff:eghBaseRequirements ;
    sh:property ff:eghLimitationPS .

ff:eghBaseRequirements a sh:PropertyShape ;
    sh:property [ sh:path ff:disability ; sh:minCount 1 ] ;
    sh:property [ sh:path ff:significantDailyLifeLimitation ; sh:minCount 1 ] .

ff:eghLimitationPS a sh:PropertyShape ;
    sh:deactivated [
        sh:not [
            shn:eq ( [ sh:path ff:disability ] true ) 
        ]
    ] ;
    sh:property [ sh:path ff:significantDailyLifeLimitation ; sh:minCount 1 ] .
