@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix fim: <https://schema.fim.fitko.net/fields/baukasten/> .
@prefix ff: <https://foerderfunke.org/default#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .

ff:hasFirstNames a ff:FimDataFieldProperty, ff:DataField ;
    ff:hasFimId fim:F00000154 ;
    ff:hasFimVersion "1.3" ;
    ff:hasFimUrl "https://schema.fim.fitko.net/fields/baukasten/F00000154/1.3" ;
    rdfs:label "Vornamen: Vorname + Mittelnamen" ;
    rdfs:comment "Plural zu Vorname" ;
    ff:similarDatafield foaf:firstName ;
    ff:hasShaclShape ff:FirstNamesShape .
ff:FirstNamesShape a sh:NodeShape ;
    sh:targetClass ff:Citizen ;
    sh:property [
        sh:path ff:hasFirstNames ;
        sh:datatype xsd:string ;
    ] .

ff:hasFamilyName a ff:FimDataFieldProperty, ff:DataField ;
    ff:hasFimId fim:F00000013 ;
    ff:hasFimVersion "1.5" ;
    ff:hasFimUrl "https://schema.fim.fitko.net/fields/baukasten/F00000013/1.5" ;
    rdfs:label "Familienname" ;
    rdfs:comment "Familienname einer natürlichen Person bestehend aus Nachname, Zuname bzw. Familienname." ;
    ff:similarDatafield foaf:lastName ;
    ff:hasShaclShape ff:FamilyNameShape .
ff:FamilyNameShape a sh:NodeShape ;
    sh:targetClass ff:Citizen ;
    sh:property [
          sh:path ff:hasFamilyName ;
          sh:datatype xsd:string ;
      ] .

ff:hasBirthday a ff:FimDataFieldProperty, ff:DataField ;
    ff:hasFimId fim:F03008235 ;
    ff:hasFimVersion "2.0" ;
    ff:hasFimUrl "https://schema.fim.fitko.net/fields/baukasten/F03008235/2.0" ;
    rdfs:label "Geburtsdatum" ;
    rdfs:comment "Dieses Feld beinhaltet das Geburtsdatum, also Tag, Monat und Jahr der Vollendung der Geburt." ;
    ff:similarDatafield foaf:birthday ;
    ff:hasShaclShape ff:BirthdayShape .
ff:BirthdayShape a sh:NodeShape ;
    sh:targetClass ff:Citizen ;
    sh:property [
        sh:path ff:hasBirthday ;
        sh:datatype xsd:date ;
        sh:sparql [
            sh:message "Birthday must not be in the future." ;
            sh:select """
            PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
            PREFIX ff: <https://foerderfunke.org/default#>
            ASK WHERE {
                $this ff:hasBirthday ?date .
                FILTER(?date > NOW())
            }
            """ ;
        ] ;
    ] .

ff:hasGender a ff:FimDataFieldProperty, ff:DataField ;
    ff:hasFimId fim:F60000332 ;
    ff:hasFimVersion "1.3" ;
    ff:hasFimUrl "https://schema.fim.fitko.net/fields/baukasten/F60000332/1.3" ;
    rdfs:label "Geschlecht" ;
    rdfs:comment "Beschreibt das Geschlecht einer Person. Folgende Angaben sind möglich: divers, männlich, weiblich, keine Angabe" ;
    ff:hasShaclShape ff:GenderShape .
ff:GenderShape a sh:NodeShape ;
    sh:targetClass ff:Citizen ;
    sh:property [
        sh:path ff:hasGender ;
        sh:in ("weiblich" "männlich" "divers" "keine Angabe") ;
        rdfs:seeAlso <https://schema.fim.fitko.net/fields/baukasten/F60000332/1.3>
    ] .

ff:hasBirthPlace a ff:FimDataFieldProperty, ff:DataField ;
    ff:hasFimId fim:F00000067 ;
    ff:hasFimVersion "1.3" ;
    ff:hasFimUrl "https://schema.fim.fitko.net/fields/baukasten/F00000067/1.3" ;
    rdfs:label "Geburtsort" ;
    rdfs:comment "Der Ort der Geburt einer natürlichen Person." ;
    ff:hasShaclShape ff:BirthPlaceShape .
ff:BirthPlaceShape a sh:NodeShape ;
    sh:targetClass ff:Citizen ;
    sh:property [
         sh:path ff:hasBirthPlace ;
         sh:datatype xsd:string ;
     ] .

ff:hasResidence a ff:FimDataFieldProperty, ff:DataField ;
    ff:hasFimId fim:F03010085 ;
    ff:hasFimVersion "1.0" ;
    ff:hasFimUrl "https://schema.fim.fitko.net/fields/baukasten/F03010085/1.0" ;
    rdfs:label "Wohnort" ;
    rdfs:comment "Enthält den Namen eines Ortes (Gemeinde, Ortschaft oder Stadt)." ;
    ff:hasShaclShape ff:ResidenceShape .
ff:ResidenceShape a sh:NodeShape ;
    sh:targetClass ff:Citizen ;
    sh:property [
        sh:path ff:hasResidence ;
        sh:datatype xsd:string ;
    ] .

ff:hasMaritalStatus a ff:FimDataFieldProperty, ff:DataField ;
    ff:hasFimId fim:F00000559 ;
    ff:hasFimVersion "1.3" ;
    ff:hasFimUrl "https://schema.fim.fitko.net/fields/baukasten/F00000559/1.3" ;
    rdfs:label "Familienstand" ;
    ff:hasShaclShape ff:MaritalStatusShape .
ff:MaritalStatusShape a sh:NodeShape ;
    sh:targetClass ff:Citizen ;
    sh:property [
        sh:path ff:hasMaritalStatus ;
        sh:in ("LD" "VH" "VW" "GS" "EA" "LP" "LV" "LA" "LE" "NB") ;
        ff:shInAbbrevationsStandFor ("ledig" "verheiratet" "verwitwet" "geschieden" "Ehe aufgehoben" "in eingetragener Lebenspartnerschaft" "durch Tod aufgelöste Lebenspartnerschaft" "aufgehobene Lebenspartnerschaft" "durch Todeserklärung aufgelöste Lebenspartnerschaft" "nicht bekannt") ;
        rdfs:seeAlso <https://www.xrepository.de/details/urn:de:dsmeld:schluesseltabelle:familienstand>
    ] .

ff:needsSocialSupport a ff:DataField ;
    rdfs:label "Sozialbedürftig" ;
    rdfs:comment "This is a shortcut for demo purposes" ;
    ff:hasShaclShape ff:NeedsSocialSupportShape .
ff:NeedsSocialSupportShape a sh:NodeShape ;
    sh:targetClass ff:Citizen ;
    sh:property [
        sh:path ff:needsSocialSupport ;
        sh:datatype xsd:boolean ;
    ] .

# ------------------------------------------------------

ff:hasAge a ff:DataField ;
    rdfs:label "Alter" ;
    ff:similarDatafield foaf:age ;
    ff:hasShaclShape ff:AgeShape .
ff:AgeShape a sh:NodeShape ;
    sh:targetClass ff:Citizen ;
    sh:property [
        sh:path ff:hasAge ;
        sh:datatype xsd:integer ;
        sh:minInclusive 0 ;
    ] .

ff:paysRentCold a ff:FimDataFieldProperty, ff:DataField ;
    ff:hasFimId fim:F00000240 ;
    ff:hasFimVersion "1.5" ;
    rdfs:label "Höhe der Miete" ;
    ff:hasShaclShape ff:paysRentColdShape .
ff:paysRentColdShape a sh:NodeShape ;
    sh:targetClass ff:Citizen ;
    sh:property [
         sh:path ff:paysRentCold ;
         sh:maxCount 1 ;
         sh:minInclusive 0 ;
     ] .

ff:hasLivingArea a ff:FimDataFieldProperty, ff:DataField ;
    ff:hasFimId fim:F00003175 ;
    ff:hasFimVersion "1.0" ;
    rdfs:label "Wohnfläche in m²" .

ff:hasNumberOfChildren a ff:FimDataFieldProperty, ff:DataField ;
    ff:hasFimId fim:F05011522 ;
    ff:hasFimVersion "1.0" ;
    rdfs:label "Anzahl Kinder" ;
    rdfs:comment "Angabe der Anzahl der im Haushalt lebenden Kinder." .

ff:hasIncomeBrutto a ff:FimDataFieldProperty, ff:DataField ;
    ff:hasFimId fim:F00000575 ;
    ff:hasFimVersion "1.1" ;
    rdfs:label "Höhe des Einkommens (Brutto)" .

ff:hasIncomeNetto a ff:FimDataFieldProperty, ff:DataField ;
    ff:hasFimId fim:F00001158 ;
    ff:hasFimVersion "1.0" ;
    rdfs:label "Nettoeinkommen monatlich" .

ff:receivesKindergeld a ff:FimLeistung, ff:DataField ;
    ff:hasFimId 576982 ;
    ff:hasLeiKaId 99041008000000 ;
    rdfs:label "Kindergeld" .

ff:parentingSetup a ff:DataField ;
    rdfs:label "Erziehungsverantwortung" ;
    ff:canHaveValue [
        ff:hasFimId fim:F00001072 ;
        ff:hasFimVersion "1.1" ;
        rdfs:label "Alleinerziehend" ;
    ] ,
    [
        a ff:DataField ;
        rdfs:label "Elternpaar" ;
    ] .

ff:receivesWohngeld a ff:DataField ;
    rdfs:label "Wohngeld" .

ff:hasChild a ff:DataField ;
    rdfs:label "Kind" .

ff:hasEmploymentStatus a ff:DataField ;
    rdfs:label "Beschäftigungsverhältnis" ;
    ff:hasShaclShape ff:hasEmploymentStatusShape .

ff:hasEmploymentStatusShape a sh:NodeShape ;
    sh:targetClass ff:Citizen ;
    ff:modelledAfter <https://www.xrepository.de/details/urn:xoev-de:xfamilie:codeliste:einkommensart> ;
    sh:property [
        sh:path ff:hasEmploymentStatus ;
        sh:in ( "Angestellt" "Selbststaendig" "Ausbildung" "Arbeitslos" "Gefoerderte Ausbildung" ) ;
    ] .
